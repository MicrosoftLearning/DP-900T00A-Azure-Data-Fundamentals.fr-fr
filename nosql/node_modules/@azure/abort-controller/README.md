---
ms.openlocfilehash: fe1a29595719e88783616e54c070b9b946052910
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051689"
---
# <a name="azure-abort-controller-library-for-javascript"></a>Bibliothèque du contrôleur Azure Abort pour JavaScript

Le package `@azure/abort-controller` fournit les classes `AbortController` et `AbortSignal`. Ces classes sont compatibles avec la classe [AbortController](https://developer.mozilla.org/docs/Web/API/AbortController) intégrée aux navigateurs modernes et avec la classe `AbortSignal` utilisée par [Fetch](https://developer.mozilla.org/docs/Web/API/Fetch_API).
Utilisez la classe `AbortController` pour créer une instance de la classe `AbortSignal` permettant d’annuler une opération dans un SDK Azure qui accepte un paramètre de type `AbortSignalLike`.

## <a name="getting-started"></a>Prise en main

### <a name="installation"></a>Installation

Installez cette bibliothèque avec npm comme suit :

```
npm install @azure/abort-controller
```

## <a name="key-concepts"></a>Concepts clés

Utilisez `AbortController` pour créer un `AbortSignal`, qui peut ensuite être passé aux opérations du SDK Azure pour annuler le travail en attente. Vous pouvez accéder à `AbortSignal` via la propriété `signal` sur un `AbortController` instancié.
Un `AbortSignal` peut également être retourné directement à partir d’une méthode statique, par exemple `AbortController.timeout(100)`.
Son annulation survient au bout de 100 millisecondes.

L’appel de `abort()` sur le `AbortController` instancié appelle les écouteurs de l’événement `abort` inscrits sur le `AbortSignal` associé.
Tous les appels suivants vers `abort()` sur le même contrôleur n’auront aucun effet.

La propriété statique `AbortSignal.none` retourne un `AbortSignal` qui ne peut pas être abandonné.

Plusieurs instances d’un `AbortSignal` peuvent être liées afin que l’appel de `abort()` sur le signal parent entraîne l’abandon de tous les signaux liés.
Cette liaison est unidirectionnelle, ce qui signifie qu’un signal parent peut affecter un signal lié, mais pas l’inverse.
Pour lier des `AbortSignals` ensemble, passez les signaux parents au constructeur `AbortController`.

## <a name="examples"></a>Exemples

Les exemples ci-dessous supposent que `doAsyncWork` est une fonction qui accepte plusieurs propriétés, dont l’une est celle du signal d’abandon.

### <a name="example-1---basic-usage"></a>Exemple 1 : utilisation de base

```js
import { AbortController } from "@azure/abort-controller";

const controller = new AbortController();
doAsyncWork({ abortSignal: controller.signal });

// at some point later
controller.abort();
```

### <a name="example-2---aborting-with-timeout"></a>Exemple 2 : abandon avec délai d’expiration

```js
import { AbortController } from "@azure/abort-controller";

const signal = AbortController.timeout(1000);
doAsyncWork({ abortSignal: signal });
```

### <a name="example-3---aborting-sub-tasks"></a>Exemple 3 : abandon des sous-tâches

```js
import { AbortController } from "@azure/abort-controller";

const allTasksController = new AbortController();

const subTask1 = new AbortController(allTasksController.signal);
const subtask2 = new AbortController(allTasksController.signal);

allTasksController.abort(); // aborts allTasksSignal, subTask1, subTask2
subTask1.abort(); // aborts only subTask1
```

### <a name="example-4---aborting-with-parent-signal-or-timeout"></a>Exemple 4 : abandon avec signal parent ou délai d’expiration

```js
import { AbortController } from "@azure/abort-controller";

const allTasksController = new AbortController();

// create a subtask controller that can be aborted manually,
// or when either the parent task aborts or the timeout is reached.
const subTask = new AbortController(allTasksController.signal, AbortController.timeout(100));

allTasksController.abort(); // aborts allTasksSignal, subTask
subTask.abort(); // aborts only subTask
```

## <a name="contributing"></a>Contribution

Si vous souhaitez contribuer à cette bibliothèque, lisez le [guide de contribution](https://github.com/Azure/azure-sdk-for-js/blob/master/CONTRIBUTING.md) pour en savoir plus sur la génération et le test du code.

![Impressions](https://azure-sdk-impressions.azurewebsites.net/api/impressions/azure-sdk-for-js%2Fsdk%2Fcore%2Fabort-controller%2FREADME.png)
