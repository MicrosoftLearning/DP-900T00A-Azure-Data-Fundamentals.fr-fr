
---
<p align="center">
  <strong>
    <a href="https://open-telemetry.github.io/opentelemetry-js-api">Documentation de l’API<a/> &nbsp;&nbsp;&bull;&nbsp;&nbsp; <a href="https://github.com/open-telemetry/opentelemetry-js/discussions">Getting In Touch (GitHub Discussions)<a/>
  </strong>
</p>

<p align="center">
  <a href="https://github.com/open-telemetry/opentelemetry-js-api/releases">
    <img alt="GitHub release (latest by date including pre-releases)" src="https://img.shields.io/github/v/release/open-telemetry/opentelemetry-js-api?include_prereleases&style=for-the-badge">
  </a>
  <a href="https://codecov.io/gh/open-telemetry/opentelemetry-js-api/branch/main/">
    <img alt="Codecov Status" src="https://img.shields.io/codecov/c/github/open-telemetry/opentelemetry-js-api?style=for-the-badge">
  </a>
  <a href="https://github.com/open-telemetry/opentelemetry-js-api/blob/main/LICENSE">
    <img alt="license" src="https://img.shields.io/badge/license-Apache_2.0-green.svg?style=for-the-badge">
  </a>
  <br/>
  <a href="https://github.com/open-telemetry/opentelemetry-js-api/actions/workflows/docs.yaml">
    <img alt="Build Status" src="https://github.com/open-telemetry/opentelemetry-js-api/actions/workflows/test.yaml/badge.svg?branch=main">
  </a>
  <a href="https://github.com/open-telemetry/opentelemetry-js-api/actions/workflows/test.yaml?query=branch%3Amain">
    <img alt="Build Status" src="https://github.com/open-telemetry/opentelemetry-js-api/actions/workflows/docs.yaml/badge.svg">
  </a>
</p>

---

# <a name="opentelemetry-api-for-javascript"></a>API OpenTelemetry pour JavaScript

[![Version publiée de NPM][npm-img]][npm-url]
[![dependencies][dependencies-image]][dependencies-url]
[![devDependencies][devDependencies-image]][devDependencies-url]

Ce package fournit tout ce qui est nécessaire pour les interactions avec l’API OpenTelemetry, y compris l’ensemble des interfaces TypeScript, des énumérations et des implémentations sans opération. Il peut être utilisé à la fois sur le serveur et dans le navigateur.

Les méthodes fournies dans ce package n’effectuent aucune opération par défaut. Elles peuvent donc être appelées sans risque par une bibliothèque ou une application pour utilisateur final, qu’il y ait ou non un SDK inscrit. Pour générer et exporter des données de télémétrie, vous avez également besoin d’un SDK comme le [SDK OpenTelemetry JS][opentelemetry-js].

## <a name="tracing-quick-start"></a>Démarrage rapide avec le traçage

### <a name="you-will-need"></a>Vous avez besoin des éléments suivants :

- Une application que vous souhaitez instrumenter
- Le [SDK OpenTelemetry JS][opentelemetry-js]
- Node.js 8.5.0 ou version ultérieure (14+ recommandée) ou un navigateur compatible avec ECMAScript 5+

**Remarque :** La compatibilité avec ECMAScript 5+ est requise pour ce package uniquement. Reportez-vous à la documentation du SDK que vous utilisez pour connaître sa version ECMAScript minimale.

**Remarque pour les créateurs de bibliothèque :** Seuls les utilisateurs finaux ont besoin d’un SDK OpenTelemetry. Pour offrir la prise en charge d’OpenTelemetry dans votre bibliothèque, vous avez seulement besoin de l’API OpenTelemetry. Pour plus d’informations, consultez la [documentation du traçage][docs-tracing].

### <a name="install-dependencies"></a>Installer les dépendances

```sh
npm install @opentelemetry/api @opentelemetry/tracing
```

### <a name="trace-your-application"></a>Tracer votre application

Pour démarrer rapidement avec le traçage, vous devez d’abord inscrire un SDK. Le SDK que vous utilisez fournit peut-être une méthode pratique qui appelle les méthodes d’inscription pour vous. Si vous souhaitez les appeler directement vous-même, consultez la documentation disponible ici : [Méthodes d’inscription du SDK][docs-sdk-registration].

Une fois que vous avez inscrit un SDK, vous pouvez définir le début et la fin des étendues. Examinez ci-après un exemple simple d’inscription d’un SDK de base et de suivi d’une opération simple. L’exemple exporte les étendues vers la console chaque seconde. Pour plus d’informations, consultez la [documentation du traçage][docs-tracing].

```javascript
const { trace }  = require("@opentelemetry/api");
const { BasicTracerProvider, ConsoleSpanExporter, SimpleSpanProcessor }  = require("@opentelemetry/tracing");

// Create and register an SDK
const provider = new BasicTracerProvider();
provider.addSpanProcessor(new SimpleSpanProcessor(new ConsoleSpanExporter()));
trace.setGlobalTracerProvider(provider);

// Acquire a tracer from the global tracer provider which will be used to trace the application
const name = 'my-application-name';
const version = '0.1.0';
const tracer = trace.getTracer(name, version);

// Trace your application by creating spans
async function operation() {
  const span = tracer.startSpan("do operation");

  // mock some work by sleeping 1 second
  await new Promise((resolve, reject) => {
    setTimeout(resolve, 1000);
  })

  span.end();
}

async function main() {
  while (true) {
    await operation();
  }
}

main();
```

## <a name="version-compatibility"></a>Compatibilité des versions

Le programme d’installation de npm et l’algorithme de résolution de module de Node autorisent potentiellement la présence de deux copies ou plus d’un package donné dans la même structure `node_modules`. Cela permet à l’API OpenTelemetry d’utiliser une variable sur l’objet `global` pour stocker l’API global. Quand une méthode API dans le package de l’API est appelée, elle vérifie si cette API `global` existe et lui envoie les appels via le proxy si et seulement si c’est une version d’API compatible. Par conséquent, si un package a une dépendance sur une version de l’API OpenTelemetry qui n’est pas compatible avec l’API de l’utilisateur final, le package reçoit une implémentation sans opération de l’API.

## <a name="upgrade-guidelines"></a>Instructions de mise à niveau

### <a name="0210-to-100"></a>0.21.0 vers 1.0.0

Pas de changements cassants

### <a name="0200-to-0210"></a>0.20.0 vers 0.21.0

- [#78](https://github.com/open-telemetry/opentelemetry-js-api/issues/78) Arguments `api.context.bind` inversés et `context` est maintenant un argument obligatoire.
- [#46](https://github.com/open-telemetry/opentelemetry-js-api/issues/46) Les classes noop et les singletons ne sont plus exportés. Pour créer une étendue noop, il est recommandé d’utiliser `api.trace.wrapSpanContext` avec `INVALID_SPAN_CONTEXT` au lieu d’utiliser `NOOP_TRACER`.

### <a name="100-rc3-to-0200"></a>1.0.0-rc.3 vers 0.20.0

- Suppression de `TimedEvent` qui ne faisait pas partie de la spécification
- `HttpBaggage` renommé en `HttpBaggagePropagator`
- [#45](https://github.com/open-telemetry/opentelemetry-js-api/pull/45) `Span#context` renommé en `Span#spanContext`
- [#47](https://github.com/open-telemetry/opentelemetry-js-api/pull/47) `getSpan`/`setSpan`/`getSpanContext`/`setSpanContext` déplacé vers l’espace de noms `trace`
- [#55](https://github.com/open-telemetry/opentelemetry-js-api/pull/55) `getBaggage`/`setBaggage`/`createBaggage` déplacé vers l’espace de noms `propagation`

## <a name="useful-links"></a>Liens utiles

- Pour plus d’informations sur OpenTelemetry : <https://opentelemetry.io/>
- Pour plus d’informations sur OpenTelemetry pour JavaScript : <https://github.com/open-telemetry/opentelemetry-js>
- Pour obtenir de l’aide ou des commentaires sur ce projet, rejoignez-nous sur [GitHub Discussions][discussions-url]

## <a name="license"></a>Licence

Apache 2.0. Pour plus d’informations, consultez [LICENCE][license-url].

[opentelemetry-js]: https://github.com/open-telemetry/opentelemetry-js

[discussions-url]: https://github.com/open-telemetry/opentelemetry-js/discussions
[license-url]: https://github.com/open-telemetry/opentelemetry-js-api/blob/main/LICENSE
[license-image]: https://img.shields.io/badge/license-Apache_2.0-green.svg?style=flat
[dependencies-image]: https://status.david-dm.org/gh/open-telemetry/opentelemetry-js-api.svg
[dependencies-url]: https://david-dm.org/open-telemetry/opentelemetry-js-api
[devDependencies-image]: https://status.david-dm.org/gh/open-telemetry/opentelemetry-js-api.svg?type=dev
[devDependencies-url]: https://david-dm.org/open-telemetry/opentelemetry-js-api?type=dev
[npm-url]: https://www.npmjs.com/package/@opentelemetry/api
[npm-img]: https://badge.fury.io/js/%40opentelemetry%2Fapi.svg
[docs-tracing]: https://github.com/open-telemetry/opentelemetry-js-api/blob/main/docs/tracing.md
[docs-sdk-registration]: https://github.com/open-telemetry/opentelemetry-js-api/blob/main/docs/sdk-registration.md
