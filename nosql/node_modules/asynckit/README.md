---
ms.openlocfilehash: 030a12b4b2a9151538e9491d3a4f23dfe9848f32
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051406"
---
# <a name="asynckit-npm-modulehttpswwwnpmjscompackageasynckit"></a>asynckit [![Module NPM](https://img.shields.io/npm/v/asynckit.svg?style=flat)](https://www.npmjs.com/package/asynckit)

Bibliothèque de l’utilitaire de travaux asynchrones de base, avec prise en charge des flux.

[![Build PhantomJS](https://img.shields.io/travis/alexindigo/asynckit/v0.4.0.svg?label=browser&style=flat)](https://travis-ci.org/alexindigo/asynckit)
[![Build Linux](https://img.shields.io/travis/alexindigo/asynckit/v0.4.0.svg?label=linux:0.12-6.x&style=flat)](https://travis-ci.org/alexindigo/asynckit)
[![Build Windows](https://img.shields.io/appveyor/ci/alexindigo/asynckit/v0.4.0.svg?label=windows:0.12-6.x&style=flat)](https://ci.appveyor.com/project/alexindigo/asynckit)

[![État de la couverture](https://img.shields.io/coveralls/alexindigo/asynckit/v0.4.0.svg?label=code+coverage&style=flat)](https://coveralls.io/github/alexindigo/asynckit?branch=master)
[![État de la dépendance](https://img.shields.io/david/alexindigo/asynckit/v0.4.0.svg?style=flat)](https://david-dm.org/alexindigo/asynckit)
[![Score général bitHound](https://www.bithound.io/github/alexindigo/asynckit/badges/score.svg)](https://www.bithound.io/github/alexindigo/asynckit)

<!-- [![Readme](https://img.shields.io/badge/readme-tested-brightgreen.svg?style=flat)](https://www.npmjs.com/package/reamde) -->

AsyncKit met en œuvre les itérateurs `parallel` et `serial` sur la liste des éléments représentés par des tableaux ou des objets.
Facultativement, il accepte la fonction d’abandon abort (doit être retournée de manière synchrone par l’itérateur pour chaque élément) et termine les travaux interrompus après un événement d’erreur. Pour un ordre d’itération spécifique, des helpers de tri intégrés (`ascending` et `descending`) et personnalisés sont également pris en charge via une méthode `asynckit.serialOrdered`.

Cela garantit que les opérations asynchrones conservent un comportement plus stable et empêchent les erreurs `Maximum call stack size exceeded`, de la part des itérateurs de synchronisation.

| compression        |     taille |
| :----------------- | -------: |
| asynckit.js        | 12,34 Ko |
| asynckit.min.js    |  4,11 Ko |
| asynckit.min.js.gz |  1,47 Ko |


## <a name="install"></a>Installer

```sh
$ npm install --save asynckit
```

## <a name="examples"></a>Exemples

### <a name="parallel-jobs"></a>Travaux parallèles

Exécute un itérateur en parallèle sur un tableau fourni. Stocke la sortie dans le tableau `result`, sur les positions correspondantes. Dans le cas peu probable d’une erreur de l’un des travaux, termine le reste des travaux actifs (si la fonction abort est fournie) et retourne une erreur, avec les données récupérées, à la fonction callback principale.

#### <a name="input-array"></a>Tableau d’entrée

```javascript
var parallel = require('asynckit').parallel
  , assert   = require('assert')
  ;

var source         = [ 1, 1, 4, 16, 64, 32, 8, 2 ]
  , expectedResult = [ 2, 2, 8, 32, 128, 64, 16, 4 ]
  , expectedTarget = [ 1, 1, 2, 4, 8, 16, 32, 64 ]
  , target         = []
  ;

parallel(source, asyncJob, function(err, result)
{
  assert.deepEqual(result, expectedResult);
  assert.deepEqual(target, expectedTarget);
});

// async job accepts one element from the array
// and a callback function
function asyncJob(item, cb)
{
  // different delays (in ms) per item
  var delay = item * 25;

  // pretend different jobs take different time to finish
  // and not in consequential order
  var timeoutId = setTimeout(function() {
    target.push(item);
    cb(null, item * 2);
  }, delay);

  // allow to cancel "leftover" jobs upon error
  // return function, invoking of which will abort this job
  return clearTimeout.bind(null, timeoutId);
}
```

Vous trouverez d’autres exemples dans [test/test-parallel-array.js](test/test-parallel-array.js).

#### <a name="input-object"></a>Objet d’entrée

Il prend également en charge les travaux nommés, listés via un objet.

```javascript
var parallel = require('asynckit/parallel')
  , assert   = require('assert')
  ;

var source         = { first: 1, one: 1, four: 4, sixteen: 16, sixtyFour: 64, thirtyTwo: 32, eight: 8, two: 2 }
  , expectedResult = { first: 2, one: 2, four: 8, sixteen: 32, sixtyFour: 128, thirtyTwo: 64, eight: 16, two: 4 }
  , expectedTarget = [ 1, 1, 2, 4, 8, 16, 32, 64 ]
  , expectedKeys   = [ 'first', 'one', 'two', 'four', 'eight', 'sixteen', 'thirtyTwo', 'sixtyFour' ]
  , target         = []
  , keys           = []
  ;

parallel(source, asyncJob, function(err, result)
{
  assert.deepEqual(result, expectedResult);
  assert.deepEqual(target, expectedTarget);
  assert.deepEqual(keys, expectedKeys);
});

// supports full value, key, callback (shortcut) interface
function asyncJob(item, key, cb)
{
  // different delays (in ms) per item
  var delay = item * 25;

  // pretend different jobs take different time to finish
  // and not in consequential order
  var timeoutId = setTimeout(function() {
    keys.push(key);
    target.push(item);
    cb(null, item * 2);
  }, delay);

  // allow to cancel "leftover" jobs upon error
  // return function, invoking of which will abort this job
  return clearTimeout.bind(null, timeoutId);
}
```

Vous trouverez d’autres exemples dans [test/test-parallel-object.js](test/test-parallel-object.js).

### <a name="serial-jobs"></a>Travaux séquentiels

Exécute un itérateur de manière séquentielle sur un tableau fourni. Stocke la sortie dans le tableau `result`, sur les positions correspondantes. Dans le cas peu probable d’une erreur de l’un des travaux, ne traite pas le reste des éléments de la liste et retourne une erreur, avec les données récupérées, à la fonction callback principale.

#### <a name="input-array"></a>Tableau d’entrée

```javascript
var serial = require('asynckit/serial')
  , assert = require('assert')
  ;

var source         = [ 1, 1, 4, 16, 64, 32, 8, 2 ]
  , expectedResult = [ 2, 2, 8, 32, 128, 64, 16, 4 ]
  , expectedTarget = [ 0, 1, 2, 3, 4, 5, 6, 7 ]
  , target         = []
  ;

serial(source, asyncJob, function(err, result)
{
  assert.deepEqual(result, expectedResult);
  assert.deepEqual(target, expectedTarget);
});

// extended interface (item, key, callback)
// also supported for arrays
function asyncJob(item, key, cb)
{
  target.push(key);

  // it will be automatically made async
  // even it iterator "returns" in the same event loop
  cb(null, item * 2);
}
```

Vous trouverez d’autres exemples dans [test/test-serial-array.js](test/test-serial-array.js).

#### <a name="input-object"></a>Objet d’entrée

Il prend également en charge les travaux nommés, listés via un objet.

```javascript
var serial = require('asynckit').serial
  , assert = require('assert')
  ;

var source         = [ 1, 1, 4, 16, 64, 32, 8, 2 ]
  , expectedResult = [ 2, 2, 8, 32, 128, 64, 16, 4 ]
  , expectedTarget = [ 0, 1, 2, 3, 4, 5, 6, 7 ]
  , target         = []
  ;

var source         = { first: 1, one: 1, four: 4, sixteen: 16, sixtyFour: 64, thirtyTwo: 32, eight: 8, two: 2 }
  , expectedResult = { first: 2, one: 2, four: 8, sixteen: 32, sixtyFour: 128, thirtyTwo: 64, eight: 16, two: 4 }
  , expectedTarget = [ 1, 1, 4, 16, 64, 32, 8, 2 ]
  , target         = []
  ;


serial(source, asyncJob, function(err, result)
{
  assert.deepEqual(result, expectedResult);
  assert.deepEqual(target, expectedTarget);
});

// shortcut interface (item, callback)
// works for object as well as for the arrays
function asyncJob(item, cb)
{
  target.push(item);

  // it will be automatically made async
  // even it iterator "returns" in the same event loop
  cb(null, item * 2);
}
```

Vous trouverez d’autres exemples dans [test/test-serial-object.js](test/test-serial-object.js).

_Remarque : Un _objet_ est une collection _non ordonnée_ de propriétés. Il peut produire des résultats inattendus avec des itérations séquentielles. Si l’ordre d’exécution des travaux a une grande importance, utilisez la méthode `serialOrdered`._

### <a name="ordered-serial-iterations"></a>Itérations séquentielles ordonnées

TBD

Par exemple, le package [compare-property](compare-property).

### <a name="streaming-interface"></a>Interface de streaming

TBD

## <a name="want-to-know-more"></a>Vous voulez en savoir plus ?

Vous trouverez d’autres exemples dans le [dossier de test](test/).

Vous pouvez aussi signaler un [problème](https://github.com/alexindigo/asynckit/issues), poser des questions et/ou faire des suggestions.

## <a name="license"></a>Licence

AsyncKit est concédé sous licence MIT.
