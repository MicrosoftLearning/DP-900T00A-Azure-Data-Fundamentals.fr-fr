---
ms.openlocfilehash: bd96d4c9278b37a2a3626abd3bd91dd20a15e2e1
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051905"
---
<a name="https-proxy-agent"></a>https-proxy-agent
================
### <a name="an-https-proxy-httpagent-implementation-for-https"></a>Implémentation `http.Agent` du proxy HTTP(s) pour HTTP
[![État de la build](https://github.com/TooTallNate/node-https-proxy-agent/workflows/Node%20CI/badge.svg)](https://github.com/TooTallNate/node-https-proxy-agent/actions?workflow=Node+CI)

Ce module fournit une implémentation `http.Agent` qui se connecte à un serveur proxy HTTP ou HTTPS spécifié, et peut être utilisée avec le module `https` intégré.

Plus précisément, cette implémentation `Agent` se connecte à un serveur « proxy » intermédiaire et émet la [méthode CONNECT HTTP][CONNECT], qui indique au proxy d’ouvrir une connexion TCP directe au serveur de destination.

Étant donné que cet agent implémente la méthode CONNECT HTTP, il fonctionne également avec d’autres protocoles qui utilisent cette méthode lors de la connexion par le biais de proxys (par exemple WebSockets).
Consultez la section « Exemples » ci-dessous pour en savoir plus.


<a name="installation"></a>Installation
------------

Installer avec `npm` :

``` bash
$ npm install https-proxy-agent
```


<a name="examples"></a>Exemples
--------

#### <a name="https-module-example"></a>Exemple de module `https`

``` js
var url = require('url');
var https = require('https');
var HttpsProxyAgent = require('https-proxy-agent');

// HTTP/HTTPS proxy to connect to
var proxy = process.env.http_proxy || 'http://168.63.76.32:3128';
console.log('using proxy server %j', proxy);

// HTTPS endpoint for the proxy to connect to
var endpoint = process.argv[2] || 'https://graph.facebook.com/tootallnate';
console.log('attempting to GET %j', endpoint);
var options = url.parse(endpoint);

// create an instance of the `HttpsProxyAgent` class with the proxy server information
var agent = new HttpsProxyAgent(proxy);
options.agent = agent;

https.get(options, function (res) {
  console.log('"response" event!', res.headers);
  res.pipe(process.stdout);
});
```

#### <a name="ws-websocket-connection-example"></a>Exemple de connexion WebSocket `ws`

``` js
var url = require('url');
var WebSocket = require('ws');
var HttpsProxyAgent = require('https-proxy-agent');

// HTTP/HTTPS proxy to connect to
var proxy = process.env.http_proxy || 'http://168.63.76.32:3128';
console.log('using proxy server %j', proxy);

// WebSocket endpoint for the proxy to connect to
var endpoint = process.argv[2] || 'ws://echo.websocket.org';
var parsed = url.parse(endpoint);
console.log('attempting to connect to WebSocket %j', endpoint);

// create an instance of the `HttpsProxyAgent` class with the proxy server information
var options = url.parse(proxy);

var agent = new HttpsProxyAgent(options);

// finally, initiate the WebSocket connection
var socket = new WebSocket(endpoint, { agent: agent });

socket.on('open', function () {
  console.log('"open" event!');
  socket.send('hello world');
});

socket.on('message', function (data, flags) {
  console.log('"message" event! %j %j', data, flags);
  socket.close();
});
```

<a name="api"></a>API
---

### <a name="new-httpsproxyagentobject-options"></a>new HttpsProxyAgent(Object options)

La classe `HttpsProxyAgent` implémente une sous-classe `http.Agent` qui se connecte au « serveur proxy HTTP(s) » spécifié afin de proxiser les requêtes HTTPS et/ou WebSocket. Pour cela, utilisez la [méthode `CONNECT` HTTP][CONNECT].

L’argument `options` peut être un URI de chaîne du serveur proxy à utiliser, ou un objet « options » avec des propriétés plus spécifiques :

  * `host` : chaîne. Hôte proxy auquel se connecter (peut également utiliser `hostname`). Obligatoire.
  * `port` : nombre. Port proxy auquel se connecter. Obligatoire.
  * `protocol` : chaîne. Si `https:`, utilisez TLS pour se connecter au proxy.
  * `headers` : objet. En-têtes HTTP supplémentaires à envoyer sur la méthode HTTP CONNECT.
  * Toutes les autres options fournies sont passées aux fonctions `net.connect()`/`tls.connect()`.


<a name="license"></a>Licence
-------

(Licence MIT)

Copyright (c) 2013 Nathan Rajlich &lt;nathan@tootallnate.net&gt;

Par la présente, l’autorisation est accordée, à titre gracieux, à toute personne obtenant une copie du présent logiciel et des fichiers de documentation associés (le « Logiciel »), de commercialiser le Logiciel sans restriction, dont, sans s’y limiter, le droit d’utiliser, de copier, de modifier, de fusionner, de publier, de distribuer, de concéder sous licence et/ou de vendre des copies du Logiciel, et d’autoriser les personnes à qui le Logiciel est fourni de faire de même, sous réserve des conditions suivantes :

La mention de droits d’auteur ci-dessus et cette autorisation doivent être incluses dans toutes les copies et parties importantes du logiciel.

LE LOGICIEL EST FOURNI « TEL QUEL », SANS GARANTIE D’AUCUNE SORTE, EXPRESSE OU IMPLICITE, NOTAMMENT LES GARANTIES DE QUALITÉ MARCHANDE, D’ADAPTATION À UN USAGE PARTICULIER ET D’ABSENCE DE CONTREFAÇON (LISTE NON EXHAUSTIVE).
LES AUTEURS ET LES DÉTENTEURS DE DROITS D’AUTEUR NE SONT EN AUCUN CAS RESPONSABLES DES RÉCLAMATIONS, DOMMAGES OU AUTRES RESPONSABILITÉS, DANS LE CADRE D’UNE ACTION CONTRACTUELLE, D’UN ACTE DÉLICTUEL OU AUTRE, RÉSULTANT DE OU LIÉS AU LOGICIEL OU À L’UTILISATION DIRECTE OU INDIRECTE DU LOGICIEL.

[CONNECT]: http://en.wikipedia.org/wiki/HTTP_tunnel#HTTP_CONNECT_Tunneling
