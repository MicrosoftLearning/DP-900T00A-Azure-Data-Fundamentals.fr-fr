---
ms.openlocfilehash: ca2cf748b426d17058b55202a60ece01d9e05592
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051457"
---
# <a name="node-abort-controller"></a>node-abort-controller

AbortController Polyfill pour Node.JS basé sur EventEmitter

[![État de la build](https://dev.azure.com/stfaul/node-abort-controller/_apis/build/status/southpolesteve.node-abort-controller?branchName=master)](https://dev.azure.com/stfaul/node-abort-controller/_build/latest?definitionId=3&branchName=master)

## <a name="usage"></a>Usage

```js
import fetch from 'node-fetch'
import AbortController from 'node-abort-controller'

const controller = new AbortController()
const signal = controller.signal

await fetch('https:/www.google.com', { signal })

// Abort after 500ms. Effectively a timeout
setTimeout(() => controller.abort(), 500)
```

## <a name="why-would-i-use-this"></a>Pourquoi en ai-je besoin ?

Vous n’en avez peut-être pas besoin ! En règle générale, il existe trois environnements dans lesquels votre code JavaScript peut s’exécuter :

- Nœud
- Navigateurs modernes (pas Internet Explorer)
- Navigateurs hérités (principalement Internet Explorer)

Pour les API JS modernes, chaque environnement obtient idéalement un polyfill :

- Uniquement s’il en a besoin
- Propre à la plateforme

Dans la pratique, ce n’est pas facile. Les outils comme webpack et browserify sont excellents pour vérifier que tout fonctionne immédiatement dans tous les environnements. Mais il est assez facile d’échouer sur les deux points ci-dessus. Il est très probable que vous finissiez par expédier des polyfills loin d’être parfaits sur des plateformes qui n’en ont même pas besoin. Alors que doit faire le développeur ? Dans le cas de `fetch` et `AbortController`, j’ai fait le travail pour vous. Voici un guide.

Si vous créez…

#### <a name="application-running-in-modern-browsers"></a>Une application s’exécutant dans les navigateurs modernes :

Félicitations ! Vous n’avez pas besoin d’une bibliothèque ni d’un polyfill ! Fermez cet onglet. Désinstallez ce package.

#### <a name="application-running-in-modern-browsers-and-node-such-as-a-server-side-rendered-js-app"></a>Une application s’exécutant dans les navigateurs modernes ET sur les nœuds (par exemple, une application JS s’affichant côté serveur) :

Utilisez _ce package_ et [node-fetch](https://www.npmjs.com/package/node-fetch). C’est le minimum dont vous avez besoin.

#### <a name="application-supporting-legacy-browsers-and-not-node"></a>Une application prenant en charge les navigateurs hérités ET PAS les nœuds :

Utilisez [abort-controller](https://www.npmjs.com/package/abort-controller) et [whatwg-fetch](https://www.npmjs.com/package/whatwg-fetch). Il s’agit de polyfills plus complets qui fonctionneront dans tous les environnements de navigateur.

#### <a name="application-supporting-legacy-browsers-and-node"></a>Une application prenant en charge les navigateurs hérités ET les nœuds :

Utilisez [abort-controller](https://www.npmjs.com/package/abort-controller) et [cross-fetch](https://www.npmjs.com/package/cross-fetch). Identique à ce qui précède, sauf que cross-fetch effectuera un polyfill correctement dans le navigateur et dans node.js

#### <a name="library-being-consumed-by-other-applications-and-using-fetch-internally"></a>Bibliothèque consommée par d’autres applications et utilisant `fetch` en interne :

Utilisez _ce package_ et [node-fetch](https://www.npmjs.com/package/node-fetch). Il s’agit de la combinaison la plus petite et la moins stricte pour vos utilisateurs finaux. Les développeurs d’applications ciblant Internet Explorer devront effectuer un polyfill pour `AbortController` et `fetch` eux-mêmes. Toutefois, votre bibliothèque ne forcera pas les développeurs à effectuer des polyfills inutiles s’ils ciblent uniquement les navigateurs modernes.

## <a name="goals"></a>Objectifs

Avec le guide ci-dessus à l’esprit, notez que cette bibliothèque a plusieurs objectifs :

1. Fournir un polyfill minimal dans node.js
2. Ne pas fournir un polyfill dans n’importe quel environnement de navigateur

Elle est idéale pour les _auteurs de bibliothèque_ qui utilisent `fetch` et `AbortController` en interne et ciblent _à la fois_ les développeurs de navigateurs et de nœuds.

## <a name="prior-art"></a>Antériorité

Merci @mysticatea pour https://github.com/mysticatea/abort-controller. C’est un polyfill `AbortController` fantastique, idéal pour de nombreux cas d’usage.
