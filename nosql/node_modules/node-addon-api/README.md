---
ms.openlocfilehash: 5f4ff1937c647160a418ca9c807267dc22e5e09f
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051713"
---
REMARQUE : La branche par défaut a été renommée.
La branche master s’appelle maintenant « main »

Si vous avez un clone local, vous pouvez le mettre à jour en exécutant ceci :

```shell
git branch -m master main
git fetch origin
git branch -u origin/main main
```

# <a name="node-addon-api-module"></a>**Module node-addon-api**
Ce module contient des **classes wrapper C++ d’en-tête seulement** qui simplifient l’utilisation de l’API [Node-API](https://nodejs.org/dist/latest/docs/api/n-api.html) basée sur le langage C qui est fournie par Node.js lorsque vous utilisez le langage C++. Il fournit un modèle objet C++ et une sémantique de gestion des exceptions avec une faible surcharge.

Il existe trois options pour implémenter les modules complémentaires : Node-API, nan ou l’utilisation directe des bibliothèques internes V8, libuv et Node.js. À moins qu’il n’y ait besoin d’un accès direct aux fonctionnalités qui ne sont pas exposées par Node-API (comme indiqué dans la section [C/C++ addons](https://nodejs.org/dist/latest/docs/api/addons.html) de la documentation Node.js core), utilisez Node-API. Pour plus d’informations sur Node-API, consultez [C/C++ addons with Node-API](https://nodejs.org/dist/latest/docs/api/n-api.html).

Node-API est une interface en langage C avec stabilité ABI qui est fournie par Node.js pour la création de modules complémentaires natifs. Il est indépendant du runtime JavaScript sous-jacent (par exemple, V8 ou ChakraCore) et il est géré dans Node.js même. Il est destiné à protéger les modules complémentaires natifs contre toute modification dans le moteur JavaScript sous-jacent, et il permet aux modules compilés pour une version de s’exécuter sur des versions ultérieures de Node.js sans recompilation.

Le module `node-addon-api`, qui ne fait pas partie de Node.js, conserve les avantages de Node-API, car il se compose uniquement de code inline qui dépend seulement de l’API stable fournie par Node-API. Par conséquent, les modules créés sur une version de Node.js à l’aide de node-addon-api peuvent s’exécuter sans avoir à être regénérés avec des versions plus récentes de Node.js.

Il est important de se rappeler que *d’autres* interfaces Node.js comme `libuv` (incluses dans un projet via `#include <uv.h>`) ne bénéficient pas d’une ABI stable dans les versions principales de Node.js. Par conséquent, un module complémentaire doit utiliser Node-API et/ou `node-addon-api` exclusivement, et être généré sur une version de Node.js comprenant une implémentation de Node-API (c’est-à-dire une version LTS active de Node.js) afin de tirer parti de la stabilité ABI dans les versions principales de Node.js. Node.js fournit un [guide sur la stabilité ABI][] contenant une explication détaillée de la stabilité ABI en général, et de la garantie de la stabilité ABI dans Node-API.

À mesure que de nouvelles API sont ajoutées à Node-API, node-addon-api doit être mis à jour pour fournir des wrappers à ces nouvelles API. Pour cette raison, node-addon-api fournit des méthodes qui permettent aux appelants d’obtenir les handles Node-API sous-jacents. Ces handles permettront d’utiliser conjointement les appels directs à Node-API et les objets/méthodes fournis par node-addon-api. Par exemple, si vous souhaitez utiliser une API pour laquelle node-addon-api ne fournit pas encore de wrapper.

Les API exposées par node-addon-api sont généralement utilisées pour créer et manipuler des valeurs JavaScript. Les concepts et les opérations correspondent généralement aux idées spécifiées dans la **spécification du langage ECMA262**.

La [ressource Node-API](https://nodejs.github.io/node-addon-examples/) constitue un très bon guide et fournit des conseils aux développeurs qui démarrent avec Node-API et node-addon-api.

- **[Configuration](#setup)**
- **[Documentation des API](#api)**
- **[Exemples](#examples)**
- **[Tests](#tests)**
- **[Plus de ressources et d’informations sur les modules complémentaires natifs](#resources)**
- **[Badges](#badges)**
- **[Code de conduite](CODE_OF_CONDUCT.md)**
- **[Contributeurs](#contributors)**
- **[Licence](#license)**

## <a name="current-version-321"></a>**Version actuelle : 3.2.1**

(Consultez [CHANGELOG.md](CHANGELOG.md) pour voir le journal des modifications dans son intégralité)

[![NPM](https://nodei.co/npm/node-addon-api.png?downloads=true&downloadRank=true)](https://nodei.co/npm/node-addon-api/) [![NPM](https://nodei.co/npm-dl/node-addon-api.png?months=6&height=1)](https://nodei.co/npm/node-addon-api/)

<a name="setup"></a>

node-addon-api est basé sur [Node-API](https://nodejs.org/api/n-api.html) et prend en charge l’utilisation de différentes versions de Node-API.
Cela permet aux modules complémentaires créés avec celui-ci de s’exécuter avec des versions Node.js qui prennent en charge la version ciblée de Node-API.
**Toutefois**, le modèle de prise en charge node-addon-api consiste à prendre en charge uniquement les versions LTS actives de Node.js. Cela signifie que chaque année, il y aura une nouvelle version principale qui entraînera la suppression de la prise en charge de la version LTS Node.js précédente.

La plus ancienne version de Node.js prise en charge par la version actuelle de node-addon-api est Node.js 10.x.

## <a name="setup"></a>Configuration
  - [Installation et utilisation](doc/setup.md)
  - [node-gyp](doc/node-gyp.md)
  - [cmake-js](doc/cmake-js.md)
  - [Outil de conversion](doc/conversion-tool.md)
  - [Outil de vérification](doc/checker-tool.md)
  - [Générateur](doc/generator.md)
  - [Outils prédéfinis](doc/prebuild_tools.md)

<a name="api"></a>

### <a name="api-documentation"></a>**Documentation de l’API**

Voici la documentation relative à node-addon-api.

 - [Full Class Hierarchy](doc/hierarchy.md)
 - [Addon Structure](doc/addon.md)
 - Types de données :
    - [Env](doc/env.md)
    - [CallbackInfo](doc/callbackinfo.md)
    - [Référence](doc/reference.md)
    - [Valeur](doc/value.md)
        - [Nom](doc/name.md)
            - [Symbole](doc/symbol.md)
            - [Chaîne](doc/string.md)
        - [Nombre](doc/number.md)
        - [Date](doc/date.md)
        - [BigInt](doc/bigint.md)
        - [Booléen](doc/boolean.md)
        - [Externe](doc/external.md)
        - [Object](doc/object.md)
            - [Tableau](doc/array.md)
            - [ObjectReference](doc/object_reference.md)
    - [PropertyDescriptor](doc/property_descriptor.md)
    - [Fonction](doc/function.md)
        - [FunctionReference](doc/function_reference.md)
    - [ObjectWrap](doc/object_wrap.md)
        - [ClassPropertyDescriptor](doc/class_property_descriptor.md)
    - [Buffer](doc/buffer.md)
    - [ArrayBuffer](doc/array_buffer.md)
    - [TypedArray](doc/typed_array.md)
      - [TypedArrayOf](doc/typed_array_of.md)
    - [DataView](doc/dataview.md)
 - [Gestion des erreurs](doc/error_handling.md)
    - [Error](doc/error.md)
      - [TypeError](doc/type_error.md)
      - [RangeError](doc/range_error.md)
 - [Object Lifetime Management](doc/object_lifetime_management.md)
    - [HandleScope](doc/handle_scope.md)
    - [EscapableHandleScope](doc/escapable_handle_scope.md)
 - [Gestion de la mémoire](doc/memory_management.md)
 - [Async Operations](doc/async_operations.md)
    - [AsyncWorker](doc/async_worker.md)
    - [AsyncContext](doc/async_context.md)
    - [AsyncWorker Variants](doc/async_worker_variants.md)
 - [Thread-safe Functions](doc/threadsafe.md)
    - [ThreadSafeFunction](doc/threadsafe_function.md)
    - [TypedThreadSafeFunction](doc/typed_threadsafe_function.md)
 - [Promise](doc/promises.md)
 - [Version management](doc/version_management.md)

<a name="examples"></a>

### <a name="examples"></a>**Exemples**

**Débutez-vous avec node-addon-api** ? Jetez un coup d’œil à nos **[exemples](https://github.com/nodejs/node-addon-examples)**

- **[Hello World](https://github.com/nodejs/node-addon-examples/tree/HEAD/1_hello_world/node-addon-api)**
- **[Passer des arguments à une fonction](https://github.com/nodejs/node-addon-examples/tree/HEAD/2_function_arguments/node-addon-api)**
- **[Rappels](https://github.com/nodejs/node-addon-examples/tree/HEAD/3_callbacks/node-addon-api)**
- **[Fabrique d’objets](https://github.com/nodejs/node-addon-examples/tree/HEAD/4_object_factory/node-addon-api)**
- **[Fabrique de fonctions](https://github.com/nodejs/node-addon-examples/tree/HEAD/5_function_factory/node-addon-api)**
- **[Wrapper un objet C++](https://github.com/nodejs/node-addon-examples/tree/HEAD/6_object_wrap/node-addon-api)**
- **[Fabrique d’objets wrappés](https://github.com/nodejs/node-addon-examples/tree/HEAD/7_factory_wrap/node-addon-api)**
- **[Passer un objet wrappé](https://github.com/nodejs/node-addon-examples/tree/HEAD/8_passing_wrapped/node-addon-api)**

<a name="tests"></a>

### <a name="tests"></a>**Tests**

Pour exécuter les tests **node-addon-api**, exécutez ceci :

```
npm install
npm test
```

Pour éviter de tester les parties dépréciées de l’exécution de l’API
```
npm install
npm test --disable-deprecated
```

Pour exécuter les tests ciblant une version spécifique de l’exécution de Node-API
```
npm install
export NAPI_VERSION=X
npm test --NAPI_VERSION=X
```

où X est la version de Node-API que vous souhaitez cibler.

### <a name="debug"></a>**Déboguer**

Pour exécuter les tests **node-addon-api** avec l’option `--debug` :

```
npm run-script dev
```

Si vous souhaitez accélérer la génération, vous pouvez utiliser l’option suivante :

```
npm run-script dev:incremental
```

Inspirez-vous de notre **[suite de tests](https://github.com/nodejs/node-addon-api/tree/HEAD/test)**

### <a name="benchmarks"></a>**Benchmarks**

Vous pouvez exécuter les benchmarks disponibles à l’aide de la commande suivante :

```
npm run-script benchmark
```

Pour plus d’informations sur l’exécution et l’ajout de benchmarks, consultez [benchmark/README.md](benchmark/README.md).

<a name="resources"></a>

### <a name="more-resource-and-info-about-native-addons"></a>**Plus de ressources et d’informations sur les modules complémentaires natifs**
- **[C++ Addons](https://nodejs.org/dist/latest/docs/api/addons.html)**
- **[Node-API](https://nodejs.org/dist/latest/docs/api/n-api.html)**
- **[Node-API - Next Generation Node API for Native Modules](https://youtu.be/-Oniup60Afs)**
- **[How We Migrated Realm JavaScript From NAN to Node-API](https://developer.mongodb.com/article/realm-javascript-nan-to-n-api)**

Étant donné que la mission principale de node-addon-api est d’exposer le Node-API en C comme des wrappers C++, les outils qui facilitent l’utilisation de n-api/node-addon-api en fournissant des modèles plus pratiques sur le développement de modules complémentaires Node.js avec n-api/node-addon-api peuvent être publiés sur NPM en tant que packages autonomes. Il est également recommandé d’étiqueter ces packages avec `node-addon-api` afin de les rendre plus visibles par la communauté.

Liens rapides vers les recherches NPM : [keywords:node-addon-api](https://www.npmjs.com/search?q=keywords%3Anode-addon-api).

<a name="other-bindings"></a>

### <a name="other-bindings"></a>**Autres liaisons**

- **[napi-rs](https://napi.rs)** - (`Rust`)

<a name="badges"></a>

### <a name="badges"></a>**Badges**

L’utilisation des badges est recommandée pour indiquer la version minimale de Node-API qui est nécessaire au module. Cela permet de déterminer les versions principales de Node.js qui sont prises en charge. Les gestionnaires des modules complémentaires peuvent consulter la [matrice de prise en charge de Node-API][] pour déterminer quelles versions Node.js fournissent une version de Node-API donnée. Les badges suivants sont disponibles :

![Badge Node-API v1](https://github.com/nodejs/abi-stable-node/blob/doc/assets/Node-API%20v1%20Badge.svg)
![Badge Node-API v2](https://github.com/nodejs/abi-stable-node/blob/doc/assets/Node-API%20v2%20Badge.svg)
![Badge Node-API v3](https://github.com/nodejs/abi-stable-node/blob/doc/assets/Node-API%20v3%20Badge.svg)
![Badge Node-API v4](https://github.com/nodejs/abi-stable-node/blob/doc/assets/Node-API%20v4%20Badge.svg)
![Badge Node-API v5](https://github.com/nodejs/abi-stable-node/blob/doc/assets/Node-API%20v5%20Badge.svg)
![Badge Node-API v6](https://github.com/nodejs/abi-stable-node/blob/doc/assets/Node-API%20v6%20Badge.svg)
![Badge Node-API v7](https://github.com/nodejs/abi-stable-node/blob/doc/assets/Node-API%20v7%20Badge.svg)
![Badge Node-API v8](https://github.com/nodejs/abi-stable-node/blob/doc/assets/Node-API%20v8%20Badge.svg)
![Badge de la version expérimentale de Node-API](https://github.com/nodejs/abi-stable-node/blob/doc/assets/Node-API%20Experimental%20Version%20Badge.svg)

## <a name="contributing"></a>**Contribution**

Nous apprécions énormément les contributions de la communauté à **node-addon-api** !
Pour mieux comprendre notre philosophie concernant l’extension de ce module, consultez [CONTRIBUTING.md](CONTRIBUTING.md).

<a name="contributors"></a>

## <a name="team-members"></a>Des membres d'équipe

### <a name="active"></a>Actif
| Nom                | Lien GitHub                                           |
| ------------------- | ----------------------------------------------------- |
| Anna Henningsen     | [addaleax](https://github.com/addaleax)               |
| Chengzhong Wu       | [legendecas](https://github.com/legendecas)           |
| Gabriel Schulhof    | [gabrielschulhof](https://github.com/gabrielschulhof) |
| Jim Schlight        | [jschlight](https://github.com/jschlight)             |
| Michael Dawson      | [mhdawson](https://github.com/mhdawson)               |
| Kevin Eady          | [KevinEady](https://github.com/KevinEady)
| Nicola Del Gobbo    | [NickNaso](https://github.com/NickNaso)               |

### <a name="emeritus"></a>Émérites
| Nom                | Lien GitHub                                           |
| ------------------- | ----------------------------------------------------- |
| Arunesh Chandra     | [aruneshchandra](https://github.com/aruneshchandra)   |
| Benjamin Byholm     | [kkoopa](https://github.com/kkoopa)                   |
| Jason Ginchereau    | [jasongin](https://github.com/jasongin)               |
| Hitesh Kanwathirtha | [digitalinfinity](https://github.com/digitalinfinity) |
| Sampson Gao         | [sampsongao](https://github.com/sampsongao)           |
| Taylor Woll         | [boingoing](https://github.com/boingoing)             |

<a name="license"></a>

Concédé sous licence [MIT](./LICENSE.md)

[Guide sur la stabilité ABI]: https://nodejs.org/en/docs/guides/abi-stability/
[Matrice de prise en charge de Node-API]: https://nodejs.org/dist/latest/docs/api/n-api.html#n_api_n_api_version_matrix
