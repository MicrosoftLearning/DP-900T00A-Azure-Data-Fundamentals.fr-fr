---
ms.openlocfilehash: f445a828ea5ae5cba850b910d938f10a783a7ed8
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050445"
---
# <a name="npmlog"></a>npmlog

Utilitaire journaliseur utilisé par npm.

Ce journaliseur est très basique.  Il effectue la journalisation pour npm.  Il prend en charge les niveaux personnalisés et les sorties colorées.

Par défaut, les journaux sont écrits dans stderr.  Si vous souhaitez envoyer des messages de journal vers des sorties autres que des flux, vous pouvez modifier le membre `log.stream`, ou simplement écouter les événements qu’il émet, et faire ce que vous souhaitez avec eux.

# <a name="installation"></a>Installation

```console
npm install npmlog --save
```

# <a name="basic-usage"></a>Utilisation de base

```javascript
var log = require('npmlog')

// additional stuff ---------------------------+
// message ----------+                         |
// prefix ----+      |                         |
// level -+   |      |                         |
//        v   v      v                         v
    log.info('fyi', 'I have a kitty cat: %j', myKittyCat)
```

## <a name="loglevel"></a>log.level

* {Chaîne}

Niveau auquel afficher les journaux.  Tous les journaux à ce niveau ou au niveau supérieur s’afficheront.  Le niveau spécial `silent` empêchera tout affichage.

## <a name="logrecord"></a>log.record

* {Array}

Tableau comprenant tous les messages de journal qui ont été entrés.

## <a name="logmaxrecordsize"></a>log.maxRecordSize

* {Number}

Nombre maximal d’enregistrements à conserver.  Si log.record est supérieur de 10 % par rapport à cette valeur, il est segmenté à 90 % de cette valeur.

Cette fenêtre de 10 % vous évite d’avoir à redimensionner un grand tableau à chaque entrée de journal.

## <a name="logprefixstyle"></a>log.prefixStyle

* {Object}

Objet de style qui spécifie le style des préfixes.  (Voir ci-dessous)

## <a name="logheadingstyle"></a>log.headingStyle

* {Object}

Objet de style qui spécifie la façon dont le titre est mis en forme.  (Voir ci-dessous)

## <a name="logheading"></a>log.heading

* {String} Par défaut : ""

Si défini, un titre s’affiche au début de chaque ligne.

## <a name="logstream"></a>log.stream

* {Stream} Par défaut : `process.stderr`

Flux dans lequel la sortie est écrite.

## <a name="logenablecolor"></a>log.enableColor()

Force l’utilisation des couleurs sur tous les messages, quel que soit le flux de sortie.

## <a name="logdisablecolor"></a>log.disableColor()

Désactive les couleurs dans tous les messages.

## <a name="logenableprogress"></a>log.enableProgress()

Active l’affichage du compteur d’activité du journal et la barre de progression

## <a name="logdisableprogress"></a>log.disableProgress()

Désactive l’affichage d’une barre de progression

## <a name="logenableunicode"></a>log.enableUnicode()

Force l’utilisation du thème unicode pour la barre de progression.

## <a name="logdisableunicode"></a>log.disableUnicode()

Désactive l’utilisation du thème unicode dans la barre de progression.

## <a name="logsetgaugetemplatetemplate"></a>log.setGaugeTemplate(template)

Définit un modèle pour la sortie de la barre de progression. Pour plus d’informations, consultez la [documentation gauge].

[Documentation gauge]: https://npmjs.com/package/gauge

## <a name="logsetgaugethemesetthemes"></a>log.setGaugeThemeset(themes)

Sélectionne un ensemble de thèmes à partir duquel sélectionner des thèmes pour la barre de progression. Pour plus d’informations, consultez la [documentation gauge].

## <a name="logpause"></a>log.pause()

Arrête d’émettre des messages dans le flux, mais ne les supprime pas.

## <a name="logresume"></a>log.resume()

Émet tous les messages mis en mémoire tampon qui ont été écrits pendant la suspension.

## <a name="logloglevel-prefix-message-"></a>log.log(level, prefix, message, ...)

* `level` {String} Niveau auquel émettre le message
* `prefix` {String} Préfixe de chaîne.  Définit "" pour ignorer.
* `message...` Arguments de `util.format`

Émet le message de journal au niveau spécifié.

## <a name="loglevel"></a>log\[level](prefix, message, ...)

Par exemple,

* log.silly(prefix, message, ...)
* log.verbose(prefix, message, ...)
* log.info(prefix, message, ...)
* log.http(prefix, message, ...)
* log.warn(prefix, message, ...)
* log.error(prefix, message, ...)

Par exemple, `log.log(level, prefix, message, ...)`.  De cette façon, chaque niveau reçoit un raccourci qui vous permet de faire `log.info(prefix, message)`.

## <a name="logaddlevellevel-n-style-disp"></a>log.addLevel(level, n, style, disp)

* `level` {String} Indicateur de niveau
* `n` {Number} Niveau numérique
* `style` {Object} Objet avec fg, bg, inverse, etc.
* `disp` {String} Remplacement facultatif pour `level` dans la sortie.

Configure un nouveau niveau avec une fonction raccourcie, et ainsi de suite.

Notez que si le nombre est `Infinity`, ce niveau entraînera la suppression de tous les messages de journal.  Si le nombre est `-Infinity`, le seul moyen de l’afficher est d’activer tous les messages de journal.

## <a name="lognewitemname-todo-weight"></a>log.newItem(name, todo, weight)

* `name` {String} Facultatif - Nom de l’élément de progression.
* `todo` {Number} Facultatif - Quantité totale de travail à effectuer. Par défaut : 0.
* `weight` {Number} Facultatif - Poids de cet élément par rapport à d’autres. la valeur par défaut est 1.

Cela ajoute un nouveau suivi d’élément `are-we-there-yet` au suivi de progression. L’objet retourné a les méthodes `log[level]`, mais il s’agit d’un objet `are-we-there-yet``Tracker`.

## <a name="lognewstreamname-todo-weight"></a>log.newStream(name, todo, weight)

Cela ajoute un nouveau suivi de flux `are-we-there-yet` au suivi de progression. L’objet retourné a les méthodes `log[level]`, mais il s’agit d’un objet `are-we-there-yet``TrackerStream`.

## <a name="lognewgroupname-weight"></a>log.newGroup(name, weight)

Cela ajoute un nouveau groupe de suivi `are-we-there-yet` au suivi de progression. L’objet retourné a les méthodes `log[level]`, mais il s’agit d’un objet `are-we-there-yet``TrackerGroup`.

# <a name="events"></a>Événements

Les événements sont tous émis avec l’objet de message.

* `log` Émis pour tous les messages
* `log.<level>` Émis pour tous les messages avec le niveau `<level>`.
* `<prefix>` Les messages avec préfixe émettent également leur préfixe en tant qu’événement.

# <a name="style-objects"></a>Objets de style

Les objets de style peuvent avoir les champs suivants :

* `fg` {String} Couleur du texte de premier plan
* `bg` {String} Couleur de l’arrière-plan
* `bold`, `inverse`, `underline` {Boolean} Définit la propriété associée
* `bell` {Boolean} Émet une sonnerie (probablement assez agaçante)

# <a name="message-objects"></a>Objets de message

Chaque événement de journal est émis avec un objet de message, et la liste `log.record` contient tous ceux qui ont été créés.  Ils comprennent les champs suivants :

* `id` {Number}
* `level` {String}
* `prefix` {String}
* `message` {String} Result of `util.format()`
* `messageRaw` {Array} Arguments de `util.format()`

# <a name="blocking-ttys"></a>TTY de blocage

Nous utilisons [`set-blocking`](https://npmjs.com/package/set-blocking) pour définir le blocage stderr et stdout s’il s’agit de TTY avec l’appel setBlocking.
Il s’agit d’une solution de contournement pour un problème qui se produisait dans les premières versions de Node.js 6.x, où stderr et stdout n’étaient pas bloquants sur OSX. (Ils bloquent toujours Windows et n’ont jamais été bloquants sur Linux.) `npmlog` a besoin qu’ils soient bloquants pour autoriser l’entrelacement des sorties de stdout et stderr.
